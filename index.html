<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Custom MsgTarget</title>
   <link rel="stylesheet" type="text/css" href="./lib/extjs-4.0.2a/resources/css/ext-all.css">
   <script type="text/javascript" src="./lib/tinymce_3.4.6/jscripts/tiny_mce/tiny_mce.js"></script>
   <script type="text/javascript" src="./lib/extjs-4.0.2a/ext-all-debug.js"></script>
   <script type="text/javascript">
   (function() {
      // Load plugin specific language pack
      tinymce.PluginManager.requireLangPack('example');

      tinymce.create('tinymce.plugins.ExamplePlugin', {
         /**
         * Initializes the plugin, this will be executed after the plugin has been created.
         * This call is done before the editor instance has finished it's initialization so use the onInit event
         * of the editor instance to intercept that event.
         *
         * @param {tinymce.Editor} ed Editor instance that the plugin is initialized in.
         * @param {string} url Absolute URL to where the plugin is located.
         */
         init : function(ed, url) {
            // Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('mceExample');
            ed.addCommand('mceExample', function() {
               Ext.Msg.alert('yo', 'This is your plugin running');
               /*ed.windowManager.open({
                  file : url + '/dialog.htm',
                  width : 320 + ed.getLang('example.delta_width', 0),
                  height : 120 + ed.getLang('example.delta_height', 0),
                  inline : 1
               },{
                  plugin_url : url, // Plugin absolute URL
                  some_custom_arg : 'custom arg' // Custom argument
               });*/
            });

         // Register example button
         ed.addButton('example', {
            title : 'example.desc',
            cmd : 'mceExample',
            image : url + '/img/justified.jpg'
         });

         // Add a node change handler, selects the button in the UI when a image is selected
         ed.onNodeChange.add(function(ed, cm, n) {
            cm.setActive('example', n.nodeName == 'IMG');
         });
      },

      /**
      * Creates control instances based in the incomming name. This method is normally not
      * needed since the addButton method of the tinymce.Editor class is a more easy way of adding buttons
      * but you sometimes need to create more complex controls like listboxes, split buttons etc then this
      * method can be used to create those.
      *
      * @param {String} n Name of the control to create.
      * @param {tinymce.ControlManager} cm Control manager to use inorder to create new control.
      * @return {tinymce.ui.Control} New control instance or null if no control was created.
      */
      createControl : function(n, cm) {
         return null;
      },

      /**
      * Returns information about the plugin as a name/value array.
      * The current keys are longname, author, authorurl, infourl and version.
      *
      * @return {Object} Name/value array containing information about the plugin.
      */
      getInfo : function() {
         return {
            longname : 'Example plugin',
            author : 'Some author',
            authorurl : 'http://tinymce.moxiecode.com',
            infourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example',
            version : "1.0"
            };
         }
      });

      // Register plugin
      tinymce.PluginManager.add('example', tinymce.plugins.ExamplePlugin);
   })();

   tinyMCE.init({
      mode : "textareas",
      theme : "advanced",
      plugins : "emotions,spellchecker,advhr,insertdatetime,preview,example",

      // Theme options - button# indicated the row# only
      theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
      theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,|,code,preview,|,forecolor,backcolor",
      theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",
      theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",
      theme_advanced_buttons4 : "example",
      theme_advanced_toolbar_location : "top",
      theme_advanced_toolbar_align : "left",
      theme_advanced_statusbar_location : "bottom",
      theme_advanced_resizing : true
   });

   </script>
</head>
<body>
        <form>
        <textarea name="content" cols="50" rows="15" >
        This is some content that will be editable with TinyMCE.
        </textarea>
        </form>
</body>
</html>
